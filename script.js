const questions = [
    {
        question: "рзз. ржЖржкржирж┐ ржХрж┐ ржлрзЗрж╕ржмрзБржХрзЗ ржирж┐ржЬрзЗрж░ ржХрзНрж░рж┐ржЮрзНржЬрж┐ ржнрж┐ржбрж┐ржУ рж╢рзЗржпрж╝рж╛рж░ ржХрж░рзЗржи?",
        answers: [
            { text: "рж╣рзНржпрж╛ржБ, ржирж┐ржпрж╝ржорж┐ржд ржХрж░рж┐ ЁЯШО", score: 3 },
            { text: "ржорж╛ржЭрзЗ ржорж╛ржЭрзЗржЗ ржХрж░рж┐ ЁЯСА", score: 2 },
            { text: "ржЦрзБржм ржХржо ржХрж░рж┐ ЁЯШЕ", score: 1 },
            { text: "ржирж╛ ЁЯЩЕ", score: 0 }
        ]
    },
    {
        question: "рзи. ржЖржкржирж┐ ржХрж┐ ржкрж╛ржмрж▓рж┐ржХ ржкрзЛрж╕рзНржЯрзЗ 'ржлрж╛рж░рзНрж╕рзНржЯ' ржХржорзЗржирзНржЯ ржХрж░рзЗржи?",
        answers: [
            { text: "ржкрзНрж░рж╛ржпрж╝ржЗ ЁЯШО", score: 3 },
            { text: "ржорж╛ржЭрзЗ ржорж╛ржЭрзЗ ЁЯШЖ", score: 2 },
            { text: "ржПржХ-ржжрзБржмрж╛рж░ ЁЯШЕ", score: 1 },
            { text: "ржирж╛ ЁЯШВ", score: 0 }
        ]
    },
    {
        question: "рзй. ржЖржкржирж┐ ржХрж┐ ржкрж╛ржмрж▓рж┐ржХ ржЬрж╛ржпрж╝ржЧрж╛ржпрж╝ ржЕржжрзНржнрзБржд ржЯрж┐ржХржЯржХ ржнрж┐ржбрж┐ржУ ржХрж░рзЗржи?",
        answers: [
            { text: "рж╕ржмрж╕ржоржпрж╝ ЁЯТГ", score: 3 },
            { text: "ржХржЦржирзЛ рж╕ржЦржирзЛ ЁЯШм", score: 2 },
            { text: "ржПржХржмрж╛рж░ ржХрж░рзЗржЫрж┐ ЁЯШЕ", score: 1 },
            { text: "ржирж╛ ЁЯЩЕ", score: 0 }
        ]
    },
    {
        question: "рзк. ржлрзЗрж╕ржмрзБржХ ржмрж╛ ржЗржирж╕рзНржЯрж╛ржЧрзНрж░рж╛ржорзЗ ржЕрждрж┐рж░рж┐ржХрзНржд рж╕рзЗрж▓ржлрж┐ ржкрзЛрж╕рзНржЯ ржХрж░рзЗржи?",
        answers: [
            { text: "рж╣рзНржпрж╛ржБ, ржкрзНрж░рждрж┐ржжрж┐ржи ЁЯд│", score: 3 },
            { text: "ржорж╛ржЭрзЗ ржорж╛ржЭрзЗ ЁЯШК", score: 2 },
            { text: "ржХржЦржирзЛ рж╕ржЦржирзЛ ЁЯШЕ", score: 1 },
            { text: "ржирж╛ ЁЯУ╡", score: 0 }
        ]
    },
    {
        question: "рзл. ржЖржкржирж┐ ржХрж┐ ржЕржирзНржпрзЗрж░ ржкрзЛрж╕рзНржЯрзЗ 'ржХрж┐ржЙржЯ', 'ржУржУржУржЙржЙржЙржЙ' ржЯрж╛ржЗржк ржХржорзЗржирзНржЯ ржХрж░рзЗржи?",
        answers: [
            { text: "рж╕ржм ржкрзЛрж╕рзНржЯрзЗ ЁЯШН", score: 3 },
            { text: "ржорж╛ржЭрзЗ ржорж╛ржЭрзЗ ЁЯлг", score: 2 },
            { text: "ржХрж┐ржЫрзБ ржХрж┐ржЫрзБрждрзЗ ЁЯШЕ", score: 1 },
            { text: "ржирж╛ ЁЯЩГ", score: 0 }
        ]
    },
    {
        question: "рзм. ржЖржкржирж┐ ржХрж┐ ржлрзБржЯржмрж▓ржж рж╕рж╛ржЬрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзЗржи?",
        answers: [
            { text: "рж╣рзНржпрж╛ржБ, ржЖржорж┐ ржлрзБржЯржмрж▓ржж ЁЯТк", score: 3 },
            { text: "ржнрж╛ржи ржХрж░рж┐ ЁЯШО", score: 2 },
            { text: "ржХржЦржирзЛ рж╕ржЦржирзЛ ЁЯШЕ", score: 1 },
            { text: "ржирж╛ ЁЯЩЕ", score: 0 }
        ]
    },
    {
        question: "рзн. ржЖржкржирж┐ ржХрж┐ ржмрзБржЭрзЗржУ ржирж╛ ржмрзБржЭрж╛рж░ ржнрж╛ржи ржХрж░рзЗ ржерж╛ржХрзЗржи ржпрж╛рждрзЗ ржЕржирзНржпрзЗрж░ ржлрж┐рж▓рж┐ржВрж╕ ржжрзЗржЦрзЗ ржоржирзЗ ржоржирзЗ ржоржЬрж╛ ржирж┐рждрзЗ ржкрж╛рж░рзЗржи?",
        answers: [
            { text: "рж╣рзНржпрж╛ржБ, ржирж┐ржпрж╝ржорж┐ржд ржХрж░рж┐ ЁЯШИ", score: 3 },
            { text: "ржорж╛ржЭрзЗ ржорж╛ржЭрзЗ ЁЯдн", score: 2 },
            { text: "ржПржХржмрж╛рж░ ржХрж░рзЗржЫрж┐ ЁЯШЕ", score: 1 },
            { text: "ржирж╛ ЁЯЩЕ", score: 0 }
        ]
    },
    {
        question: "рзо. ржЖржкржирж┐ ржХрж┐ ржоржирзЗ ржХрж░рзЗржи ржпрзЗ ржЗржЙржирж┐ржнрж╛рж░рзНрж╕рж┐ржЯрж┐рждрзЗ ржЙржарж▓рзЗржЗ ржХрзЗржЙ ржЗржорзЛрж╢ржи рж╢рзЛ ржХрж░рж▓рзЗ рждрж╛ржХрзЗ ржирж┐ржпрж╝рзЗ ржоржЬрж╛ ржХрж░рзЗ ржЕржкржорж╛ржи ржХрж░рж╛ ржХрзБрж▓ ржмрзНржпрж╛ржкрж╛рж░?",
        answers: [
            { text: "рж╣рзНржпрж╛ржБ, ржПржЯрж╛ржЗ ржХрзБрж▓ ЁЯШО", score: 3 },
            { text: "ржХржЦржирзЛ ржПржоржи ржХрж░рзЗржЫрж┐ ЁЯлг", score: 2 },
            { text: "ржоржЬрж╛рж░ ржЫрж▓рзЗ ржПржХржмрж╛рж░ ЁЯШЕ", score: 1 },
            { text: "ржирж╛, ржХржЦржирзЛржЗ ржирж╛ ЁЯЩЕ", score: 0 }
        ]
    },
    {
        question: "рзп. ржЖржкржирж┐ ржХрзА ржЗржЙржирж┐ржнрж╛рж░рзНрж╕рж┐ржЯрж┐ рждрзЗ ржмржирзНржзрзБржжрзЗрж░ ржЧрж╛рж▓рж┐ ржжрзЗржпрж╝рж╛ржЯрж╛ржХрзЗ ржХрзБрж▓ ржоржирзЗ ржХрж░рзЗржи?",
        answers: [
            { text: "рж╣рзНржпрж╛ржБ, ржПржЯрж╛ржЗ ржХрзБрж▓ ЁЯШО", score: 3 },
            { text: "ржорж╛ржЭрзЗ ржоржзрзНржпрзЗ ЁЯдн", score: 2 },
            { text: "ржирж┐ржЙржЯрзНрж░рж╛рж▓ ЁЯШЕ", score: 1 },
            { text: "ржирж╛ ЁЯЩЕ", score: 0 }
        ]
    },
    {
        question: "рззрзж. ржЖржкржирж┐ ржХрзА рж╕рж┐ржЬрж┐ ржирж┐рзЯрзЗ ржмржирзНржзрзБрж░рзЗ ржоржЬрж╛рж░ ржЫрж▓рзЗ ржЕржкржорж╛ржи ржХрж░рж╛ржХрзЗ ржХрзБрж▓ ржоржирзЗ ржХрж░рзЗржи?",
        answers: [
            { text: "рж╣рзНржпрж╛ржБ, ржПржЯрж╛ржЗ ржХрзБрж▓ ЁЯШО", score: 3 },
            { text: "ржХрж░рж┐ ржорж╛ржЭрзЗ ржоржзрзНржпрзЗ ЁЯлг", score: 2 },
            { text: "ржирж┐ржЙржЯрзНрж░рж╛рж▓ ЁЯШЕ", score: 1 },
            { text: "ржирж╛, ржХржЦржирзЛржЗ ржирж╛ ЁЯЩЕ", score: 0 }
        ]
    },
    {
        question: "рззрзз. ржЖржкржирж┐ ржХрзА ржлрзЗрж╕ржмрзБржХ ржмрж╛ржпрж╝рзЛрждрзЗ ржЗржЙржирж┐ржнрж╛рж░рзНрж╕рж┐ржЯрж┐ ржмрж╛ ржХрж▓рзЗржЬ ржирж┐рзЯрзЗ ржлрзНрж▓рзЗржХрзНрж╕ ржХрж░рж╛ ржХрзЗ рж╕рзБржирзНржжрж░ ржоржирзЗ ржХрж░рзЗржи?",
        answers: [
            { text: "рж╣рзНржпрж╛ржБ, ржПржЧрзБрж▓рж╛ ржирж┐рзЯрзЗ ржирж╛ ржХрж░рж▓рзЗ ржХрзА рж╣ржмрзЗ? ЁЯШО", score: 3 },
            { text: "ржорж╛ржЭрзЗ ржоржзрзНржпрзЗ ржжрзЗржЗ, ржЖржмрж╛рж░ ржкрж░рзЗ ржбрзЗрж▓ ржорж╛рж░рж┐ ЁЯдн", score: 2 },
            { text: "ржПржХржмрж╛рж░ ржХрж░рзЗржЫрж┐ ЁЯШЕ", score: 1 },
            { text: "ржирж╛ ЁЯЩЕ", score: 0 }
        ]
    },
    {
        question: "рззрзи. ржЖржкржирж┐ ржХрж┐ ржлрзЗржмрзБ рждрзЗ ржирж┐ржХржирзЗржо рж╣рж┐рж╕рзЗржмрзЗ рж░рж╛ржЬржХрзБржорж╛рж░ ржмрж╛ рж░рж╛ржЬржХрзБржорж╛рж░рж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржнрж╛рж▓рзЛ ржоржирзЗ ржХрж░рзЗржи?",
        answers: [
            { text: "рж╣рзНржпрж╛ржБ, ржХрж╛рж░ржг ржЖржорж┐ ржЖржорж╛рж░ рж░рж╛ржЬрзНржпрзЗрж░ рж░рж╛ржЬрж╛/рж░рж╛ржирж┐ ЁЯСС", score: 3 },
            { text: "ржорж╛ржЭрзЗ ржоржзрзНржпрзЗ ржжрзЗржЗ, ржЖржмрж╛рж░ ржкрж░рзЗ ржбрзЗрж▓ ржорж╛рж░рж┐ ЁЯлг", score: 2 },
            { text: "ржПржХржмрж╛рж░ ржХрж░рзЗржЫрж┐ ЁЯШЕ", score: 1 },
            { text: "ржирж╛, ржХржЦржирзЛржЗ ржирж╛ ЁЯЩЕ", score: 0 }
        ]
    },
    {
        question: "рззрзй. ржЖржкржирж┐ ржХрж┐ ржирж┐ржЬрзЗрж░ ржкрзБрж░ржирзЛ ржкрзЛрж╕рзНржЯрзЗ ржирж┐ржЬрзЗржЗ ржХржорзЗржирзНржЯ ржХрж░рзЗржи?",
        answers: [
            { text: "рж╣рзНржпрж╛ржБ, ржирж┐ржпрж╝ржорж┐ржд ржХрж░рж┐ ЁЯШИ", score: 3 },
            { text: "ржорж╛ржЭрзЗ ржорж╛ржЭрзЗ ЁЯдФ", score: 2 },
            { text: "ржПржХржмрж╛рж░ ржХрж░рзЗржЫрж┐ ЁЯШЕ", score: 1 },
            { text: "ржирж╛, ржХржЦржирзЛржЗ ржирж╛ ЁЯЩЕ", score: 0 }
        ]
    },
    {
        question: "рззрзк. ржмрзНрж░рзЗржХржЖржк рж╣ржЗрж▓рзЗ ржлрзЗрж╕ржмрзБржХрзЗ рж╕ржмрж╛ржЗржХрзЗ ржЬрж╛ржирж╛ржирзЛ ржХрж┐ рж╕рзБржирзНржжрж░ ржоржирзЗ ржХрж░рзЗржи?",
        answers: [
            { text: "рж╣рзНржпрж╛ржБ ЁЯШО", score: 3 },
            { text: "ржЖржВрж╢рж┐ржХ рж╣рзНржпрж╛ржБ ЁЯдн", score: 2 },
            { text: "ржоржирзНрждржмрзНржп ржирж╛ржЗ ЁЯШЕ", score: 1 },
            { text: "ржирж╛ ЁЯЩЕ", score: 0 }
        ]
    },
    {
        question: "рззрзл. ржЖржкржирж┐ ржХрж┐ ржирж┐ржЬрзЗрж░ ржЦрзЛржБржЬ ржирж╛ ржирж┐рж▓рзЗ ржЕржирзНржп ржХрзЗржЙ ржЦрзЛржБржЬ ржирзЗрзЯ ржирж╛ ржПрж╕ржм ржкрзЛрж╕рзНржЯ ржХрж░рзЗржи?",
        answers: [
            { text: "рж╣рзНржпрж╛ржБ, рж╕ржмрж╕ржоржпрж╝ ЁЯШИ", score: 3 },
            { text: "ржорж╛ржЭрзЗ ржорж╛ржЭрзЗ ЁЯдФ", score: 2 },
            { text: "ржПржХржмрж╛рж░ ржХрж░рзЗржЫрж┐ ЁЯШЕ", score: 1 },
            { text: "ржирж╛ ЁЯЩЕ", score: 0 }
        ]
    },
    {
        question: "рззрзм. ржПржХ рж░рж╛ржд ржирж╛ ржШрзБржорж╛рж▓рзЗ ржорзЗрж╕рзЗржЮрзНржЬрж╛рж░рзЗ ржирзЛржЯ ржжрж┐рзЯрзЗ рж╕ржмрж╛ржЗржХрзЗ ржЬрж╛ржирж╛ржи ржХрж┐?",
        answers: [
            { text: "рж╣рзНржпрж╛ржБ, ржирж┐ржпрж╝ржорж┐ржд ржХрж░рж┐ ЁЯШО", score: 3 },
            { text: "ржорж╛ржЭрзЗ ржорж╛ржЭрзЗ ЁЯдн", score: 2 },
            { text: "ржПржХржмрж╛рж░ ржХрж░рзЗржЫрж┐ ЁЯШЕ", score: 1 },
            { text: "ржирж╛ ЁЯЩЕ", score: 0 }
        ]
    },
    {
        question: "рззрзн. 'ржкрзНрж░рзЗрж╢рж╛рж░? рж╣рзБрзЯрж╛ржЯ ржкрзНрж░рзЗрж╕рж╛рж░', 'ржорзЗрж╕рж┐, ржЖрж▓рзНржнрж╛рж░рзЗржЬ, ржмрзБржЬрж┐ржЬрзБржЧрж┐', 'ржнрж┐ржирж┐, ржмрзЗрж▓рж┐ржВрж╣рж╛ржо, рж░ржжрзНрж░рж┐ржЧрзЛ' ржЗрждрзНржпрж╛ржжрж┐ ржЬрж┐ржирж┐рж╕ ржирзЛржЯрзЗ ржжрж┐рзЯрзЗ ржирж┐ржЬрзЗржХрзЗ ржлрзБржЯржмрж▓ржж ржкрзНрж░ржорж╛ржг ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзЗ ржерж╛ржХрзЗржи ржХрж┐?",
        answers: [
            { text: "рж╣рзНржпрж╛ржБ, рж╕ржмрж╕ржоржпрж╝ ЁЯШО", score: 3 },
            { text: "ржорж╛ржЭрзЗ ржорж╛ржЭрзЗржЗ ржжрзЗржЗ ЁЯдн", score: 2 },
            { text: "ржПржХржмрж╛рж░ ржХрж░рзЗржЫрж┐ ЁЯШЕ", score: 1 },
            { text: "ржирж╛ ЁЯЩЕ", score: 0 }
        ]
    },
    {
        question: "рззрзо. ржЖржкржирж┐ ржХрж┐ 'ржЧрж╛ржЫ-рж▓рждрж╛ржкрж╛рждрж╛ рждрзБржорж┐ ржЖржорж╛рж░ ржЪрж╛ржБржжрзЗрж░ ржЯрзБржХрж░рж╛' ржЗрждрзНржпрж╛ржжрж┐ ржмрж╛ржХрзНржп ржЗржЙржЬ ржХрж░рзЗ ржлрзНрж▓рж╛рж░рзНржЯ ржХрж░рзЗржи?",
        answers: [
            { text: "рж╣рзНржпрж╛ржБ, рж╕ржмрж╕ржоржпрж╝ ЁЯШО", score: 3 },
            { text: "ржорж╛ржЭрзЗ ржорж╛ржЭрзЗржЗ ржоржирзЗ ржЙрждрж▓рж╛ рж▓рж╛ржЧрзЗ рждрж╛ржЗ ржХрж░рж┐ ЁЯдн", score: 2 },
            { text: "ржПржХржмрж╛рж░ ржХрж░рзЗржЫрж┐ ЁЯШЕ", score: 1 },
            { text: "ржирж╛ ЁЯЩЕ", score: 0 }
        ]
    },
    {
        question: "рззрзп. ржЖржкржирж┐ ржирж┐ржЬрзЗржХрзЗ ржХрзА ржоржирзЗ ржХрж░рзЗржи?",
        answers: [
            { text: "ржХрзБрж▓ ржЧрж╛ржпрж╝ ЁЯШО", score: 3 },
            { text: "рж▓рж┐ржУржирзЗрж▓ ржорзЗрж╕рж┐ / ржХрзНрж░рж┐рж╕ржЯрж┐рзЯрж╛ржирзЛ рж░рзЛржирж╛рж▓ржжрзЛ ЁЯдн", score: 2 },
            { text: "рж╢рж╛ржирзНржд рж╢рж┐рж╖рзНржЯ рж▓рзЗржЬ ржпрзБржХрзНржд ЁЯШЕ", score: 1 },
            { text: "ржХрж┐ржЫрзБржЗ ржоржирзЗ ржХрж░рж┐ржирж╛ ЁЯЩЕ", score: 0 }
        ]
    },
    {
        question: "рзирзж. ржпржжрж┐ ржХрзЗржЙ ржЖржкржирж╛рж░ ржнрзБрж▓ ржзрж░рзЗ ржлрзЗрж▓рзЗ, рждржЦржи ржЖржкржирж┐ ржХрзА ржХрж░рзЗржи?",
        answers: [
            { text: "ржкржЪрж╛ ржХрж┐ржЫрзБ ржмрж▓рзЗ ржЕржкржорж╛ржи ржХрж░рж┐ ЁЯЩЕ", score: 3 },
            { text: "ржкрж╛рж▓рзНржЯрж╛ ржХрж┐ржЫрзБ ржмрж▓рзЗ ржирж┐ржЬрзЗрж░ ржХржерж╛ ржХрзЗ ржарж┐ржХ ржжрж╛ржмрж┐ ржХрж░рж┐ ЁЯдн", score: 2 },
            { text: "ржирж╛ рж╢рзБржирзЗ ржЙрж░рж┐рзЯрзЗ ржжрзЗржЗ ЁЯШЕ", score: 1 },
            { text: "рж╢рж╛ржирзНржд ржерзЗржХрзЗ рж╢рзБржирзЗ рж╢рзБржзрж░рж┐рзЯрзЗ ржирзЗржЗ ЁЯШОЁЯЩЕ", score: 0 }
        ]
    }
];


let username = "";
let currentQuestionIndex = 0;
let totalScore = 0;
const maxScore = questions.length * 3;
let userAnswers = Array(questions.length).fill(null);

const loginScreen = document.getElementById('login-screen');
const quizScreen = document.getElementById('quiz-screen');
const resultContainer = document.getElementById('result-container');

const usernameInput = document.getElementById('username');
const startBtn = document.getElementById('start-btn');
const questionElement = document.getElementById('question');
const answerButtonsElement = document.getElementById('answer-buttons');
const nextButton = document.getElementById('next-btn');
const prevButton = document.getElementById('prev-btn');
const progressText = document.getElementById('progress-text');
const progressFill = document.getElementById('progress-fill');
const resultText = document.getElementById('result-text');
const resultEmoji = document.getElementById('result-emoji');
const shareBtn = document.getElementById('share-btn');
const restartBtn = document.getElementById('restart-btn');
const leaderboardList = document.getElementById('leaderboard-list');

// ----------------- Login -----------------
startBtn.addEventListener('click', () => {
    username = usernameInput.value.trim();
    if (username === "") {
        alert("ржмрж▓рж▓рж╛ржо ржпрзЗ ржирж╛ржо рж▓рж┐ржЦрзЗржи, ржирж╛ржо ржирж╛ рж▓рж┐ржЦрж▓рзЗ ржЦрзЗрж▓рждрзЗ ржжрж┐рждрж╛ржо ржирж╛ xD ЁЯШЕ");
        return;
    }
    loginScreen.style.display = "none"; // Login hide
    quizScreen.style.display = "block"; // Quiz show
    startQuiz();
});

// ----------------- Quiz -----------------
function startQuiz() {
    currentQuestionIndex = 0;
    totalScore = 0;
    userAnswers.fill(null);
    resultContainer.classList.add('hide');
    document.getElementById('quiz').classList.remove('hide');
    showQuestion();
    updatePrevButtonVisibility();
}

function showQuestion() {
    resetState();
    const currentQuestion = questions[currentQuestionIndex];
    questionElement.innerText = currentQuestion.question;

    currentQuestion.answers.forEach((answer, index) => {
        const button = document.createElement('button');
        button.innerText = answer.text;
        button.classList.add('btn');

        if (userAnswers[currentQuestionIndex]?.index === index) {
            button.classList.add('selected');
        }

        button.addEventListener('click', () => selectAnswer(index, answer.score));
        answerButtonsElement.appendChild(button);
    });

    progressText.innerText = `ржкрзНрж░рж╢рзНржи ${currentQuestionIndex + 1} / ${questions.length}`;
    progressFill.style.width = `${(currentQuestionIndex / questions.length) * 100}%`;
}

function resetState() {
    nextButton.style.display = 'none';
    while (answerButtonsElement.firstChild) {
        answerButtonsElement.removeChild(answerButtonsElement.firstChild);
    }
}

function selectAnswer(index, score) {
    if (userAnswers[currentQuestionIndex] !== null) {
        totalScore -= userAnswers[currentQuestionIndex].score;
    }
    userAnswers[currentQuestionIndex] = { score, index };
    totalScore += score;

    answerButtonsElement.querySelectorAll('.btn').forEach(btn => btn.classList.remove('selected'));
    answerButtonsElement.children[index].classList.add('selected');

    nextButton.style.display = 'inline-block';
}

nextButton.addEventListener('click', () => {
    currentQuestionIndex++;
    if (currentQuestionIndex < questions.length) {
        showQuestion();
        updatePrevButtonVisibility();
    } else {
        showResult();
    }
});

prevButton.addEventListener('click', () => {
    if (currentQuestionIndex > 0) {
        currentQuestionIndex--;
        showQuestion();
        updatePrevButtonVisibility();
    }
});

function updatePrevButtonVisibility() {
    prevButton.style.display = currentQuestionIndex === 0 ? 'none' : 'inline-block';
}

// ----------------- Result -----------------
function showResult() {
    document.getElementById('quiz').classList.add('hide');
    resultContainer.style.display = "block";

    let levelText, emoji;

    if (totalScore <= 7) {
        levelText = "тЬи Cringe Immunity тЬи\nржЖржкржирж┐ ржПржХржжржоржЗ ржХрзНрж░рж┐ржЮрзНржЬ ржирж╛, Pure Soul ЁЯШМ";
        emoji = "ЁЯШЗ";
    } else if (totalScore <= 15) {
        levelText = "ЁЯлг Cringe Beginner\nрж╣рж╛рж▓ржХрж╛ ржХрзНрж░рж┐ржЮрзНржЬ, ржорж╛ржЭрзЗ ржорж╛ржЭрзЗ ржлрж╕ржХрж╛ржи ЁЯШЕ";
        emoji = "ЁЯЩВ";
    } else if (totalScore <= 25) {
        levelText = "ЁЯШм Cringe Intermediate\nржЖржкржирж┐ ржорж╛ржЭрж╛рж░рж┐ рж▓рзЗржнрзЗрж▓рзЗрж░ ржХрзНрж░рж┐ржЮрзНржЬ ЁЯШП";
        emoji = "ЁЯШм";
    } else if (totalScore <= 35) {
        levelText = "ЁЯдб Cringe Master\nржЖржкржирж┐ ржХрзНрж░рж┐ржЮрзНржЬрзЗ ржкрж╛рж░ржжрж░рзНрж╢рзА, ржнрж╛ржЗрж░рж╛рж▓ ржЯрж╛ржЗржк ЁЯШО";
        emoji = "ЁЯдб";
    } else {
        levelText = "ЁЯТе Cringe Legend ЁЯФе\nржЖржкржирж┐ ржЖрж▓рзНржЯрж┐ржорзЗржЯ ржХрзНрж░рж┐ржЮрзНржЬ ржХрж┐ржВ/ржХрзБржЗржи ЁЯССЁЯдп";
        emoji = "ЁЯТА";
    }

    resultText.innerText = `${levelText}\n${username} ржПрж░ рж╕рзНржХрзЛрж░: ${totalScore}/${maxScore}`;
    resultEmoji.innerText = emoji;
    progressFill.style.width = `100%`;

    saveToLeaderboard(username, totalScore);
    showLeaderboard();

    const shareURL = encodeURIComponent(window.location.href);
    const shareText = encodeURIComponent(`ржЖржорж┐ "${levelText.split('\n')[0]}" рж▓рзЗржнрзЗрж▓рзЗ ржкрзМржБржЫрзЗржЫрж┐! ЁЯШЕ\nржЖржкржирж┐ ржХрждржЯрж╛ ржХрзНрж░рж┐ржЮрзНржЬ? ржЯрзЗрж╕рзНржЯ ржХрж░рзБржи ЁЯСЙ`);
    shareBtn.href = `https://www.facebook.com/sharer/sharer.php?u=${shareURL}&quote=${shareText}`;
}

// ----------------- Restart -----------------
restartBtn.addEventListener('click', () => {
    resultContainer.style.display = "none";
    quizScreen.style.display = "block";
    startQuiz();
});

// ----------------- Leaderboard -----------------
function saveToLeaderboard(name, score) {
    let leaderboard = JSON.parse(localStorage.getItem("cringeLeaderboard")) || [];
    leaderboard.push({ name, score });
    leaderboard.sort((a, b) => b.score - a.score);
    leaderboard = leaderboard.slice(0, 10); // top 10
    localStorage.setItem("cringeLeaderboard", JSON.stringify(leaderboard));
}

function showLeaderboard() {
    const leaderboard = JSON.parse(localStorage.getItem("cringeLeaderboard")) || [];
    leaderboardList.innerHTML = "";
    leaderboard.forEach((entry, index) => {
        const li = document.createElement("li");
        li.textContent = `${index + 1}. ${entry.name} тАФ ${entry.score}`;
        leaderboardList.appendChild(li);
    });
}
